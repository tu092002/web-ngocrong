<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    body{
        background: black;
    }
    section.frame {
        margin: 0 auto;
        width: 800px;
        padding: 0;
        border: 1px solid red;
        width: 90%;

    }
    
    div.dauTruong {
        /* background-color: aqua; */
        background-image: url(img/vodai4.png);
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center;
        background-size: contain;

        position: relative;
        width: 100%;
        height:600px;
        margin: 0 auto;
        padding: 0;
    }
    
    section.frame img.knight {
        position: absolute;
        width: 100px;
        height: 130px;
        display: block;
        left: 50px;
        bottom: 0px;
        animation: punch 2s;
        z-index: 999;
    }
    
    section.frame img.boss {
        position: absolute;
        width: 90px;
        height: 150px;
        display: block;
        left: 400px;
        bottom: 0px;
        z-index: 999;
    }
    
    .skill1 {
        width: 80px;
        height: 50px;
        position: absolute;
        display: block;
    }
    
    .skin1 {
        position: absolute;
        display: block;
        width: 200px;
        height: 150px;
        z-index: 5;
        opacity: 0.8;
    }
    
    img.skill2 {
        display: block;
        position: absolute;
    }
    
    div.energyBar {
        position: absolute;
        top: 0px;
        left: 0px;
        right: 0px;
        background: rgb(230, 222, 222);
        width: 100%;
        height: 70px;
        border: 2px solid red;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    @keyframes punch {
        25% {
            background-image: url('img/skill2_1.png');
        }
        50% {
            background-image: url('img/skill2_2.png');
        }
        75% {
            background-image: url('img/skill2_3.png');
        }
    }
    
    div.energy {
        width: 40%;
    }
    
    div.HPplayer,
    div.HPplayer2 {
        border: 3px solid red;
        height: 20px;
    }
    
    div.HPplayer>div,
    div.HPplayer2>div {
        width: 540px;
        height: inherit;
        background-color: rgba(220, 25, 25, 0.811);
    }
    
    div.HPplayer>div,
    div.KIplayer>div {
        margin-right: auto;
    }
    
    div.HPplayer2>div,
    div.KIplayer2>div {
        margin-left: auto;
    }
    
    div.KIplayer,
    div.KIplayer2 {
        border: 1px solid rgb(0, 21, 255);
        height: 10px;
        border-radius: 0px 0px 20px 20px;
    }
    
    div.KIplayer>div,
    div.KIplayer2>div {
        width: 540px;
        height: 100%;
        background-color: rgb(44, 27, 121);
        border-radius: 0px 0px 20px 20px;
    }
    /* div.divKnight{
        position: absolute;
        width: 90px;
        height: 100px;
        left: 300px;
        top: 200px;
        background-image: url('img/skill2_1.png');
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        display: block;
        animation: punch 0.5s infinite;
    } */
</style>

<body>
    <section class="frame">
        <div class="dauTruong">
            <div class="energyBar">
                <div class="energy">
                    <div class="HPplayer">
                        <div></div>
                    </div>
                    <div class="KIplayer">
                        <div></div>
                    </div>
                </div>
                <div class="energy">
                    <div class="HPplayer2">
                        <div></div>

                    </div>
                    <div class="KIplayer2">
                        <div></div>

                    </div>
                </div>

            </div>
            <img class='knight' src="img/rong1_right.gif" alt="">

            <img class='boss' src="img/broly_left.png" alt="">
            <div class="skills">

            </div>

        </div>


    </section>


</body>
<script>

    // var divKnight = document.querySelector('.divKnight')
    var knight = document.querySelector('.knight')
    var boss = document.querySelector('.boss')
    var dauTruong = document.querySelector('.dauTruong')
    var skill1 = document.createElement('img')
    var skin1 = document.createElement('img')
    var skill2 = document.createElement('img')
    var skills = document.querySelector('.skills')
    var skill2s = document.querySelector('.skills')
    var HPplayer = document.querySelector('.HPplayer > div')
    var HPplayer2 = document.querySelector('.HPplayer2 > div')
    var KIplayer = document.querySelector('.KIplayer > div')
    var KIplayer2 = document.querySelector('.KIplayer2 > div')
    skin1.setAttribute('src', 'img/skin1.png')
    transform_toNho(skin1)

    var demCuoc = 0;

    var finishKick2 = null
    var finishKick2Left = null
    skin1.classList.add('skin1')
    var player = {
        x: 50,
        y: 0,
        hp: HPplayer.offsetWidth,
        ki: KIplayer.offsetWidth,
        speed: 20,
        power: 100,
        MovingLeft: false,
        MovingRight: false,
        MovingUp: false,
        skill1: false,
        skill2: false,
        skill3: false,
        skill4: false,
        reuseSkill1: 1000,
        reuseSkill2: 1000,
        reuseSkill3: 1000,
        reuseSKill4: 5000,
    }
    var playerTwo = {
        x: 400,
        y: 0,
        hp: HPplayer2.offsetWidth,
        ki: KIplayer2.offsetWidth,
        skill1: false,
        skill2: false,
        skill3: false
    }
    var skillOne = {
        is: 1,
        reuse: true,
        x: 100,
        y: 60,
        speed: 20,
        power: 100
    }

    var skillTwo = {
        is: 2,
        reuse: true,
        x: player.x,
        y: dauTruong.offsetHeight - skill2.offsetHeight,
        power: 170
    }
    var skillThree = {
        is: 3,
        reuse: true,
        power: 100
    }
    var skillFour = {
        is: 4,
        reuse: true,
        Change_Lv: 1,
        power: 150
    }


    function tutLuiSkillTwo(direct, sosanhVitri, nghieng, tut) {

        if (((player.x <= playerTwo.x && player.x >= playerTwo.x - 75) ||
                (player.x <= playerTwo.x + 75 && player.x >= playerTwo.x)) &&
            (player.y <= playerTwo.y + boss.offsetHeight && player.y >= playerTwo.y)) {
            demCuoc++;


            playerTwo.x += tut
            boss.style.left = playerTwo.x + 'px'
            boss.style.transform = `rotate(${nghieng})`

            setTimeout(function() {

                boss.setAttribute('src', `img/brolyTank2_${direct}.png`)
                boss.style.transform = 'none'


            }, 200)
            setTimeout(function() {

                boss.setAttribute('src', `img/brolyTank1_${direct}.png`)
                boss.style.transform = 'none'


            }, 400)
            setTimeout(function() {


                boss.setAttribute('src', `img/broly_${direct}.png`)
                boss.style.width = '90px'
                boss.style.height = '150px'


            }, 600)

            return true


        }
        return false


    }

    function veMo(bienSo) {
        if (bienSo < 0)
            bienSo = 0;
    }

    function resultDame(skill) {
        if (skill == 1) {
            playerTwo.hp -= 60

            player.ki -= 30
            veMo(playerTwo.hp)
            veMo(player.ki)

            KIplayer.style.width = player.ki + 'px'
            HPplayer2.style.width = playerTwo.hp + 'px'

        } else if (skill == 2) {
            playerTwo.hp -= 30
            player.ki -= 10
            veMo(playerTwo.hp)
            veMo(player.ki)
            KIplayer.style.width = player.ki + 'px'
            HPplayer2.style.width = playerTwo.hp + 'px'

        } else if (skill == 3) {
            playerTwo.hp -= 40
            player.ki -= 20
            veMo(playerTwo.hp)
            veMo(player.ki)
            KIplayer.style.width = player.ki + 'px'
            HPplayer2.style.width = playerTwo.hp + 'px'

        }
    }

    function DameSkillTwo() {
        if (boss.getAttribute('src') == `img/broly_right.png` && player.x - playerTwo.x < 0) {
            var tutOk = tutLuiSkillTwo('right', 'play2 bentrai play1', '20deg', 20)
            if (tutOk) {

                resultDame(2)

                return true;

            }
            return false

        } else if (boss.getAttribute('src') == `img/broly_right.png` && player.x - playerTwo.x > 0) {

            var tutOk = tutLuiSkillTwo('right', 'play2 ben phai play1', '-20deg', -20)

            if (tutOk) {

                resultDame(2)

                return true;

            }
            return false
        } else if (boss.getAttribute('src') == `img/broly_left.png` && player.x - playerTwo.x < 0) {
            var tutOk = tutLuiSkillTwo('left', 'play2 bentrai play1', '20deg', 20)
            if (tutOk) {
                resultDame(2)

                return true;

            }
            return false
        } else if (boss.getAttribute('src') == `img/broly_left.png` && player.x - playerTwo.x > 0) {
            var tutOk = tutLuiSkillTwo('left', 'play2 ben phai play1', '-20deg', -20)
            if (tutOk) {

                resultDame(2)

                return true;

            }
            return false
        }




        return false

    }
    function Punch(object) {
        if (knight.getAttribute('src') == 'img/rong2_right.gif') {
            var count = 1;
            var caocao = setInterval(function() {

                knight.setAttribute('src', `img/skill2_${count}_blue_right.png`)
                if(count == 1 || count ==  3 ){
                    knight.style.width = '130px'

                }
                count++;
                var dinhPunch = DameSkillTwo()
                if (count > 4) {
                    clearInterval(caocao)
                    knight.setAttribute('src', 'img/rong2_right.gif')
                    knight.style.width = '100px'

                }

            }, 200)
        }
        if (knight.getAttribute('src') == 'img/rong2_left.gif') {
            var count = 1;
            var caocao = setInterval(function() {

                knight.setAttribute('src', `img/skill2_${count}_blue_left.png`)
                if(count == 1 || count ==  3 ){
                    knight.style.width = '130px'

                }
                count++;
                var dinhPunch = DameSkillTwo()
                if (count > 4) {
                    clearInterval(caocao)
                    knight.setAttribute('src', 'img/rong2_left.gif')
                    knight.style.width = '100px'

                }

            }, 200)
        }
        if (knight.getAttribute('src') == 'img/rong1_right.gif') {
            var count = 1;
            var caocao = setInterval(function() {

                knight.setAttribute('src', `img/skill2_${count}_right.png`)
                if(count == 1 || count ==  3 ){
                    knight.style.width = '130px'

                }
                count++;
                var dinhPunch = DameSkillTwo()
                if (count > 4) {
                    clearInterval(caocao)
                    knight.setAttribute('src', 'img/rong1_right.gif')
                    knight.style.width = '100px'

                }

            }, 200)
        } else if (knight.getAttribute('src') == 'img/rong1_left.gif') {
            var count = 1;
            var caocao = setInterval(function() {
                knight.setAttribute('src', `img/skill2_${count}_left.png`)
                if(count == 1 || count ==  3 ){
                    knight.style.width = '130px'

                }
                count++;
                var dinhPunch = DameSkillTwo()
                console.log(count)
                if (count > 4) {
                    clearInterval(caocao)
                    knight.setAttribute('src', 'img/rong1_left.gif')
                    knight.style.width = '100px'

                }

            }, 200)
            
        }

    }
    Kind_kick1 = 1; // 1-> 2
    Kind_kick2 = 1;
    Kind_kick3 =  1;
    Kind_kick4 = 1;
    function Kick() {
        if (knight.getAttribute('src') == 'img/rong2_right.gif') {
            var count = 1;
            var phiCuoc = setInterval(function() {
                knight.setAttribute('src', `img/skill3_${Kind_kick3}_blue_right.png`)
               console.log(Kind_kick3)
                count++;
                Kind_kick3++;
                var dinhPunch = DameSkillTwo()

                if (count >= 3) {
                    var dinhPunch = DameSkillTwo()

                    clearInterval(phiCuoc)
                    knight.setAttribute('src', 'img/rong2_right.gif')

                }
                if(Kind_kick3 >= 7){
                    Kind_kick3 =  1;
                }

            }, 200)
        }
        if (knight.getAttribute('src') == 'img/rong2_left.gif') {
            var count = 1;
            var phiCuoc = setInterval(function() {
                knight.setAttribute('src', `img/skill3_${Kind_kick4}_blue_left.png`)
               console.log(Kind_kick4)
                count++;
                Kind_kick4++;
                var dinhPunch = DameSkillTwo()

                if (count >= 3) {
                    var dinhPunch = DameSkillTwo()

                    clearInterval(phiCuoc)
                    knight.setAttribute('src', 'img/rong2_left.gif')

                }
                if(Kind_kick4 >= 7){
                    Kind_kick4 =  1;
                }

            }, 200)
        }
        if (knight.getAttribute('src') == 'img/rong1_right.gif') {
            var count = 1;
            var phiCuoc = setInterval(function() {
                knight.setAttribute('src', `img/skill3_${Kind_kick1}_right.png`)
               console.log(Kind_kick1)
                count++;
                Kind_kick1++;
                var dinhPunch = DameSkillTwo()

                if (count >= 3) {
                    var dinhPunch = DameSkillTwo()

                    clearInterval(phiCuoc)
                    knight.setAttribute('src', 'img/rong1_right.gif')

                }
                if(Kind_kick1 >= 7){
                    Kind_kick1 =  1;
                }

            }, 200)
        } else if (knight.getAttribute('src') == 'img/rong1_left.gif') {

            var count = 1;
            var phiCuoc = setInterval(function() {
                knight.setAttribute('src', `img/skill3_${Kind_kick2}_left.png`)
               
                count++;
                Kind_kick2++;
                var dinhPunch = DameSkillTwo()

                if (count >= 3) {
                    var dinhPunch = DameSkillTwo()

                    clearInterval(phiCuoc)
                    knight.setAttribute('src', 'img/rong1_left.gif')

                }
                if(Kind_kick2 >= 7){
                    Kind_kick2 =  1;
                    console.log(Kind_kick1)
                }

            }, 200)
        }

    }
    setInterval(function hoiskill1() {
        skillOne.reuse = true;
    }, 4000)



    function Kick2() {
        if (knight.getAttribute('src') == 'img/rong2_right.gif') {

        setTimeout(function() {
            player.y += 60
            knight.style.bottom = player.y + 'px'
        }, 100)

        var count = 3;
        var phiCuoc1 = setInterval(function() {
            knight.setAttribute('src', `img/skill3_${count}_blue_right.png`)
            count++;
            if (count >= 7) {
                clearInterval(phiCuoc1)
                knight.setAttribute('src', 'img/rong2_right.png')

            }

        }, 100)
        finishKick2 = setTimeout(function() {
            player.y -= 60
            knight.style.bottom = player.y + 'px'
            playerMove(player.speed)
        }, 500)

        }
         else if (knight.getAttribute('src') == 'img/rong2_left.gif') {

        setTimeout(function() {
            player.y += 60
            knight.style.bottom = player.y + 'px'
        }, 100)

        var count = 3;
        var phiCuoc1 = setInterval(function() {
            knight.setAttribute('src', `img/skill3_${count}_blue_left.png`)
            count++;
            if (count >= 7) {
                clearInterval(phiCuoc1)
                knight.setAttribute('src', 'img/rong2_left.gif')

            }

        }, 100)
        finishKick2 = setTimeout(function() {
            player.y -= 60
            knight.style.bottom = player.y + 'px'
            playerMove(player.speed)

        }, 500)

        }
        if (knight.getAttribute('src') == 'img/rong1_right.gif') {

            setTimeout(function() {
                player.y += 60
                knight.style.bottom = player.y + 'px'
            }, 100)

            var count = 3;
            var phiCuoc1 = setInterval(function() {
                knight.setAttribute('src', `img/skill3_${count}_right.png`)
                count++;
                if (count >= 7) {
                    clearInterval(phiCuoc1)
                    knight.setAttribute('src', 'img/rong1_right.gif')

                }

            }, 100)
            finishKick2 = setTimeout(function() {
                player.y -= 60
                knight.style.bottom = player.y + 'px'
                playerMove(player.speed)

            }, 500)

        } else if (knight.getAttribute('src') == 'img/rong1_left.gif') {
            setTimeout(function() {
                player.y += 60
                knight.style.bottom = player.y + 'px'
            }, 100)

            var count = 3;
            var phiCuoc2 = setInterval(function() {
                knight.setAttribute('src', `img/skill3_${count}_left.png`)
                count++;
                if (count >= 7) {
                    clearInterval(phiCuoc2)
                    knight.setAttribute('src', 'img/rong1_left.gif')

                }

            }, 100)
            finishKick2 = setTimeout(function() {
                player.y -= 60
                knight.style.bottom = player.y + 'px'
                playerMove(player.speed)

            }, 500)
        }
    }

    document.addEventListener('keyup', function(event) {
        event.preventDefault()
        if (event.keyCode == 37) {

            player.MovingLeft = false;
           
            let arrSrc =  knight.getAttribute('src').split('.');
             arrSrc[1] = 'gif'
            knight.setAttribute('src',arrSrc[0] +'.'+ arrSrc[1])

        } else if (event.keyCode == 39)
        {
            player.MovingRight = false;
            let arrSrc =  knight.getAttribute('src').split('.');
             arrSrc[1] = 'gif'
            knight.setAttribute('src',arrSrc[0] +'.'+ arrSrc[1])

        }
        else if (event.keyCode == 38) {
            player.MovingUp = false;

        }
        if (event.keyCode == 32) {

            player.skill1 = false;
        } else if (event.keyCode == 87) {
            setTimeout(function() {

            skillFour.Change_Lv = 2;
            if (skillFour.Change_Lv == 2) {
                skin1.style.left = (player.x - 50) + 'px'
                skin1.style.bottom = player.y + 'px'
            }
            player.skill4 = true;

                skillFour.Change_Lv = 1;
                if(knight.getAttribute('src') == 'img/rong2_right.png')
                    knight.setAttribute('src', `img/rong${skillFour.Change_Lv}_right.png`)
                else if(knight.getAttribute('src') == 'img/rong2_left.png')
                     knight.setAttribute('src', `img/rong${skillFour.Change_Lv}_left.png`)

                dauTruong.removeChild(skin1)

            }, 10000)
        } else if (event.keyCode == 69) {
            Punch()

            player.skill2 = false;

            //    divKnight.setAttribute('animation','none')
        } else if (event.keyCode == 82) {
            //    Kick()
            player.skill3 = false

        }
        playerMove(player.speed);

        showSkill(100)

    });
    var tuyetky = 0

    document.addEventListener('keydown', function() {
        event.preventDefault()
        if (event.keyCode == 37) {
            player.MovingLeft = true;

        } else if (event.keyCode == 39) {
            player.MovingRight = true;
        } else if (event.keyCode == 38) {
            player.MovingUp = true;
        }
        if (event.keyCode == 32 && skillOne.reuse == true) {

            player.skill1 = true;

            skillOne.reuse = false

        } else if (event.keyCode == 87) {
            
            skillFour.Change_Lv = 2;
            player.skill4 = true;
            if(knight.getAttribute('src') == 'img/rong1_right.gif'){
                knight.setAttribute('src', `img/skill4_1_right.png`)
                

                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_2_right.png`)
                    
    
                },400)
                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_3_right.png`)
                    
    
                },800)
                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_4_right.png`)
    
                    
    
                },1000)
                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_4_right.png`)
                    dauTruong.appendChild(skin1)
    
                    
    
                },1400)
                setTimeout(function(){
    
                    knight.setAttribute('src', `img/rong2_right.gif`)
    
    
                },1800)
            } 
            else if(knight.getAttribute('src') == 'img/rong1_left.gif'){
                knight.setAttribute('src', `img/skill4_1_left.png`)
                

                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_2_left.png`)
                    
    
                },400)
                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_3_left.png`)
                    
    
                },800)
                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_4_left.png`)
    
                    
    
                },1000)
                setTimeout(function(){
                    knight.setAttribute('src', `img/skill4_4_left.png`)
                    dauTruong.appendChild(skin1)
    
                    
    
                },1400)
                setTimeout(function(){
    
                    knight.setAttribute('src', `img/rong2_left.gif`)
    
    
                },1800)
            }
           
        }
        else if (event.keyCode == 69) {
            player.skill2 = true;
            Punch()
        } else if (event.keyCode == 82) {
            tuyetky++;
            player.skill3 = true;
            if (tuyetky == 3) {
                tuyetky = 0;
                Kick2()
            } else {

                Kick()
            }
        }
        playerMove(player.speed);

        showSkill(100)
    });

    function playerMove(tocdo) {

        if (player.MovingLeft) {
            knight.setAttribute('src', `img/rong${skillFour.Change_Lv}_left.png`)
            player.x -= tocdo;
            knight.style.left = player.x + 'px';
            skin1.style.left = (player.x - 50) + 'px'
            skin1.style.bottom = player.y + 'px'
        } else if (player.MovingRight) {
            knight.setAttribute('src', `img/rong${skillFour.Change_Lv}_right.png`)
            knight.classList.add('knight')
            player.x += tocdo;
            knight.style.left = player.x + 'px';
            skin1.style.left = (player.x - 50) + 'px'
            skin1.style.bottom = player.y + 'px'
        } else if (player.MovingUp) {
            setTimeout(function() {
                console.log(player.y)

                for (var i = 0; i < 20; i++) {
                    player.y += 1.5;
                    knight.style.bottom = player.y + 'px'
                    skin1.style.left = (player.x - 50) + 'px'
                    skin1.style.bottom = player.y + 'px'
                }
            }, 10)



            var rotTuDo = setTimeout(function() {

                for (var i = 0; i < 20; i++) {
                    player.y -= 1.5;
                    knight.style.bottom = player.y + 'px'
                    skin1.style.left = (player.x - 50) + 'px'
                    skin1.style.bottom = player.y + 'px'
                        // khong cho phep rot tu do
                    if (player.y <= 0) {
                        player.y = 0;
                        knight.style.bottom = player.y + 'px'
                        skin1.style.left = (player.x - 50) + 'px'
                        skin1.style.bottom = player.y + 'px'
                        clearTimeout(rotTuDo)

                    }

                }
            }, 480)
        }
        fullOut(player, knight)

        knight.style.left = player.x + 'px'
        knight.style.bottom = player.y + 'px'
        skin1.style.left = (player.x - 50) + 'px'
        skin1.style.bottom = player.y + 'px'

    }
    // right , play1 sau play2, 20deg, 20
    //right, play1 truoc play2 , -20deg, -20
    // left, play1 sau play2, 20deg, 20
    // left , play1 truoc play 2, -20deg, -20
    
    function tutLuiSkillOne(direct, sosanhVitri, nghieng, tut) {
        console.log('vao1')
        // console.log(skillOne.x  == playerTwo.x)
        // console.log(skillOne.y <= playerTwo.y + boss.offsetHeight)
        // console.log(skillOne.y >= playerTwo.y)

        if ( (skillOne.x == playerTwo.x  || skillOne.x >= playerTwo.x - 10 && skillOne.x <= playerTwo.x   
                || skillOne.x <= playerTwo.x + 10 && skillOne.x >= playerTwo.x   )  &&
            skillOne.y <= playerTwo.y + boss.offsetHeight &&
            skillOne.y >= playerTwo.y) {
            // alert('vao')
            player.skill1 = false
            skillOne.x = playerTwo.x - 20
            skillOne.y = playerTwo.y + 50
            skill1.style.left = skillOne.x + 'px'
            skill1.style.bottom = skillOne.y + 'px'
            skill1.setAttribute('src', 'img/boom.png')

            skill1.style.width = '200px'
            skill1.style.height = '200px'
            playerTwo.x += tut
            boss.style.left = playerTwo.x + 'px'
            boss.style.transform = `rotate(${nghieng})`
            setTimeout(function() {

                boss.setAttribute('src', `img/brolyTank1_${direct}.png`)
                boss.style.transform = 'none'


            }, 200)
            setTimeout(function() {

                boss.setAttribute('src', `img/brolyTank3_${direct}.png`)
                boss.style.transform = 'none'


            }, 400)
            setTimeout(function() {


                boss.setAttribute('src', `img/broly_${direct}.png`)


            }, 600)

            setTimeout(function() {

                while (skills.firstChild) {

                    skills.removeChild(skills.firstChild)

                }
                skill1.style.width = '80px'
                skill1.style.height = '50px'
            }, 400)


            return true

        }
        return false
    }
   
   
    function DameSkillOne() {
        if (boss.getAttribute('src') == `img/broly_right.png` && player.x - playerTwo.x < 0) {
            var tutOk = tutLuiSkillOne('right', 'play2 bentrai play1', '20deg', 20)

            if (tutOk) {
                resultDame(1)
                return true;

            }
            return false

        } else if (boss.getAttribute('src') == `img/broly_right.png` && player.x - playerTwo.x > 0) {

            var tutOk = tutLuiSkillOne('right', 'play2 ben phai play1', '-20deg', -20)
            if (tutOk) {
                resultDame(1)
                return true;

            }
            return false
        } else if (boss.getAttribute('src') == `img/broly_left.png` && player.x - playerTwo.x < 0) {
            var tutOk = tutLuiSkillOne('left', 'play2 bentrai play1', '20deg', 20)
            if (tutOk) {
                resultDame(1)
                return true;

            }
            return false
        } else if (boss.getAttribute('src') == `img/broly_left.png` && player.x - playerTwo.x > 0) {
            var tutOk = tutLuiSkillOne('left', 'play2 ben phai play1', '-20deg', -20)

            if (tutOk) {
                resultDame(1)
                return true;

            }
            return false
        }




        return false

    }
    

    function showSkill(sucmanh) {
        if (player.skill1 == true && player.skill2 == false && player.skill3 == false) {
           
            skill1.setAttribute('src', 'img/kame3_right.png')
            skill1.classList.add('skill1')
            //blue
            if (knight.getAttribute('src') == `img/rong2_right.gif`) {
                knight.setAttribute('src','img/skill1_1_blue_right.png')

                skill1.setAttribute('src', 'img/kame3_right.png')
                skills.appendChild(skill1)

                skillOne.x = player.x + 70
                skillOne.y = player.y + 80
                console.log(skillOne.y)
                skill1.style.left = skillOne.x + 'px'
                skill1.style.bottom = skillOne.y + 'px'
                skillOneMove()

            } else if (knight.getAttribute('src') == `img/rong2_left.gif`) {
                knight.setAttribute('src','img/skill1_1_blue_left.png')

                skill1.setAttribute('src', 'img/kame3_left.png')
                skills.appendChild(skill1)

                console.log(player.x)
                skillOne.x = player.x - 30
                skillOne.y = player.y + 80
                console.log(skillOne.x)
                skill1.style.left = skillOne.x + 'px'
                skill1.style.bottom = skillOne.y + 'px'
                skillOneMove()


            }
            /// goku1


            if (knight.getAttribute('src') == `img/rong1_right.gif`) {
                knight.setAttribute('src','img/skill1_1_right.png')

                skill1.setAttribute('src', 'img/kame3_right.png')
                skills.appendChild(skill1)

                skillOne.x = player.x + 70
                skillOne.y = player.y + 80
                console.log(skillOne.y)
                skill1.style.left = skillOne.x + 'px'
                skill1.style.bottom = skillOne.y + 'px'
                skillOneMove()

            } else if (knight.getAttribute('src') == `img/rong1_left.gif`) {
                knight.setAttribute('src','img/skill1_1_left.png')

                skill1.setAttribute('src', 'img/kame3_left.png')
                skills.appendChild(skill1)

                console.log(player.x)
                skillOne.x = player.x - 30
                skillOne.y = player.y + 80
                console.log(skillOne.x)
                skill1.style.left = skillOne.x + 'px'
                skill1.style.bottom = skillOne.y + 'px'
                skillOneMove()


            }


            transform_toNho(skill1)
            

        }
            /////////////////////////////
            ////////////////////////////
           

           
            
      


    }
    function skillOneMove(){

                 if (knight.getAttribute('src') == `img/skill1_1_blue_right.png`) {

                var diChuyenSkill1 = setInterval(function() {
                    skillOne.x += skillOne.speed
                    skill1.style.left = skillOne.x + 'px'
                    var dinhChuong = DameSkillOne()
                    if (dinhChuong) {
                       
                        dinhChuong = false
                        knight.setAttribute('src','img/rong2_right.gif')

                        clearInterval(diChuyenSkill1)

                       
                       

                    }
                    if (fullOut_skill(skillOne)) {
                        knight.setAttribute('src','img/rong2_right.gif')
                       
                        clearInterval(diChuyenSkill1)
                            // skillOne.x  = dauTruong.offsetWidth
                            // skill1.style.left = skillOne.x + 'px'
                        fullOut_skill(skillOne)


                       
                    }
                }, 50)

            
                }
                 else if (knight.getAttribute('src') == `img/skill1_1_blue_left.png`) {
                    var diChuyenSkill1 = setInterval(function() {
                        skillOne.x -= skillOne.speed
                        skill1.style.left = skillOne.x + 'px'
                        var dinhChuong = DameSkillOne()
                        if (dinhChuong) {
                            knight.setAttribute('src','img/rong2_left.gif')
                            dinhChuong = false
                           
                            clearInterval(diChuyenSkill1)
                           

                        }

                        if (fullOut_skill(skillOne)) {
                            knight.setAttribute('src','img/rong2_left.gif')
                            fullOut_skill(skillOne)
                           
                            clearInterval(diChuyenSkill1)
                                // skillOne.x  = dauTruong.offsetWidth
                                // skill1.style.left = skillOne.x + 'px'
                           

                        }
                    }, 50)



                }

            /////////////////////



            if (knight.getAttribute('src') == `img/skill1_1_right.png`) {

                var diChuyenSkill1 = setInterval(function() {
                    skillOne.x += skillOne.speed
                    skill1.style.left = skillOne.x + 'px'
                    var dinhChuong = DameSkillOne()
                    if (dinhChuong) {
                       
                        dinhChuong = false
                        knight.setAttribute('src','img/rong1_right.gif')

                        clearInterval(diChuyenSkill1)

                       
                       

                    }
                    if (fullOut_skill(skillOne)) {
                        knight.setAttribute('src','img/rong1_right.gif')
                       
                        clearInterval(diChuyenSkill1)
                            // skillOne.x  = dauTruong.offsetWidth
                            // skill1.style.left = skillOne.x + 'px'
                        fullOut_skill(skillOne)


                       
                    }
                }, 50)

            
                }
                 else if (knight.getAttribute('src') == `img/skill1_1_left.png`) {
                    var diChuyenSkill1 = setInterval(function() {
                        skillOne.x -= skillOne.speed
                        skill1.style.left = skillOne.x + 'px'
                        var dinhChuong = DameSkillOne()
                        if (dinhChuong) {
                            knight.setAttribute('src','img/rong1_left.gif')
                            dinhChuong = false
                           
                            clearInterval(diChuyenSkill1)
                           

                        }

                        if (fullOut_skill(skillOne)) {
                            knight.setAttribute('src','img/rong1_left.gif')
                            fullOut_skill(skillOne)
                           
                            clearInterval(diChuyenSkill1)
                                // skillOne.x  = dauTruong.offsetWidth
                                // skill1.style.left = skillOne.x + 'px'
                           

                        }
                    }, 50)



                }
            }

    function fullOut(players, knights) {
        // người có 2 TH đụng trái và phải
        if (players.x >= dauTruong.offsetWidth - knights.offsetWidth) {


            players.x = dauTruong.offsetWidth - knights.offsetWidth;
            knights.style.left = players.x + 'px'
        } else if (players.x <= 0) {
            players.x = 0;
            knights.style.left = players.x + 'px'

        }


        if (players.y < 0) {
            players.y = 0
            knights.style.bottom = players.y + 'px'
        }


    }

    function fullOut_skill(skill) {
        // người có 2 TH đụng trên (dưới) kiem soat rot xuong dat o tren Moving up, down
        var xoaskill
            // chan bien skill1 right
        if (skill.is == 1) {
            if (skill.x >= dauTruong.offsetWidth - skill1.offsetWidth) {

                // alert("oll")
                skill.x = dauTruong.offsetWidth - skill1.offsetWidth
                skill1.style.left = skill.x + 'px'

                xoaskill = setTimeout(function() {
                    if (skills.firstChild)
                        skills.removeChild(skills.firstChild)
                    player.skill1 = false;

                }, 100)
                skill1.setAttribute('src','img/explosion.webp')
                setTimeout(function(){
                    skill1.style.width = '150px';

                },500)
                setTimeout(function(){
                    skill1.style.width = '80px';

                },800)

                return true // nghia la skill finish xong 1 chuong
            }
            if (skill.x <= 0) {


                skill.x = 0
                skill1.style.left = skill.x + 'px'
                xoaskill = setTimeout(function() {
                    if (skills.firstChild)
                        skills.removeChild(skills.firstChild)
                    player.skill1 = false;

                }, 100)
                skill1.setAttribute('src','img/explosion.webp')
                setTimeout(function(){
                    skill1.style.width = '150px';

                },500)
                setTimeout(function(){
                    skill1.style.width = '80px';

                },800)

                return true // nghia la skill finish xong 1 chuong
            }
        } else if (skill.is == 2) {

        }


        

        return false // skill chua finish chua ketthuc
    }

    function transform_toNho(Elemnent) {
        setInterval(() => {
            Elemnent.style.transform = 'scale(1.2)'


        }, 200);
        setInterval(function() {
            Elemnent.style.transform = 'scale(1)'
        }, 400)
    }





   
    let direct = 'right';
        setInterval(()=>{
            if(boss.getAttribute('src') == 'img/broly_right.png'){
                    direct =  'right';
            }
            else
           
                direct =  'left';
        },300)
        
          
            
    
    setTimeout(function(){
        for(let i = 0; i < 3; i++)
        {
           

            bossPunch(direct);

        }
    },3000)
    diChuyenGan(200,direct, 100);
    function diChuyenGan(distance, direct, speed){
        setInterval(()=>{
            if(player.x > playerTwo.x){
            boss.setAttribute('src','img/broly_right.png')
        }
        else {
            boss.setAttribute('src','img/broly_left.png')

        }

        while (playerTwo.x < player.x) {
            if (playerTwo.x + distance >= player.x) {
                break
            }
            playerTwo.x += skillOne.speed
            boss.style.left = playerTwo.x + 'px'

        }
        while (playerTwo.x >= player.x) {
            if (playerTwo.x - distance <= player.x) {

                break
            }
            playerTwo.x -= skillOne.speed
            boss.style.left = playerTwo.x + 'px'

        }
        while (playerTwo.y < player.y) {
            if (playerTwo.y == player.y) {
                break
            }
            playerTwo.y += 2.5
            boss.style.bottom = playerTwo.y + 'px'


        }
        while (playerTwo.y >= player.y) {
            if (playerTwo.y == player.y) {

                break
            }
            playerTwo.y -= 2.5
            boss.style.bottom = playerTwo.y + 'px'

        }
       
        var player2 = playerTwo
        var xep = boss
        fullOut(player2, xep)
        },speed)
    }
   function bossPunch(direct){
            diChuyenGan(100,direct,100)
            // console.log(direct)
            setTimeout(()=>{
            boss.setAttribute('src',`img/broly_punch1_${direct}.png`)
            boss.style.width = '160px'
            },200)
            setTimeout(()=>{
                boss.setAttribute('src',`img/broly_punch2_${direct}.png`)
                boss.style.width = '160px'
            },400)
            setTimeout(()=>{
                boss.setAttribute('src',`img/broly_punch3_${direct}.png`)
                boss.style.width = '160px'
            },600)
            setTimeout(()=>{
                boss.setAttribute('src',`img/broly_${direct}.png`)
                boss.style.width = '100px'
            },800)
        

      

   }
</script>


</html>